import{r,W as g,j as e,b as C}from"./app-wV0qL3A9.js";import{A as f,I as _}from"./InputError-3VFty9qF.js";const y="_Game_14att_1",G="_Table_14att_10",p={Game:y,Table:G};function T({players:s}){const n=r.useContext(f),t=r.useContext(b),{post:a,processing:d,errors:l,reset:m}=g(),x=o=>{o.preventDefault(),a(route("playerGame.create",[t.id,{players:s}]))};return e.jsxs("div",{className:"mx-auto",children:[e.jsx("h5",{className:"mb-0",children:"No Team List"}),e.jsx("ol",{children:s.map((o,c)=>e.jsxs("li",{children:[o.first_name," ",o.last_name]},c))}),n.user&&t.id?e.jsxs("form",{onSubmit:x,children:[e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:d,children:"Create Teams"}),e.jsx(_,{children:l.players})]}):null]})}function L({title:s,open:n,handleOpen:t,children:a}){return e.jsx("dialog",{open:n,children:e.jsxs("article",{children:[e.jsxs("header",{children:[e.jsx("a",{href:"#close","aria-label":"Close",className:"close",onClick:t}),s]}),a]})})}function S({game:s}){const[n,t]=r.useState(!1),a=r.useContext(f),{post:d,patch:l}=g(),m=c=>{c.preventDefault(),t(i=>!i)},x=c=>{c.preventDefault(),l(route("playerGame.reset",[s.id]))},o=c=>{c.preventDefault(),d(route("game.delete",[s.id])),t(!1)};return e.jsx(e.Fragment,{children:a.user?e.jsxs("div",{className:"mt-5 row justify-content-center justify-content-lg-end gap-4 d-flex",children:[e.jsx("div",{className:"col-lg-3",children:e.jsx("form",{onSubmit:x,className:"mb-0 pb-0",children:e.jsx("button",{className:"bg-primary border-primary",children:"Reset teams"})})}),e.jsx("div",{className:"col-lg-3",children:e.jsx("a",{className:"btn btn-primary",href:route("game.edit",s.id),children:e.jsx("button",{children:"Edit Game"})})}),e.jsx("div",{className:"col-lg-3",children:e.jsx("button",{onClick:m,className:"bg-danger border-danger",children:"Delete game"})}),e.jsxs(L,{title:"Remove game",open:n,handleOpen:m,children:[e.jsx("p",{className:"mb-5",children:"Are you sure you want to delete this game?"}),e.jsx("form",{onSubmit:o,children:e.jsx("button",{className:"w-100 bg-danger border-danger",children:"Delete game"})})]})]}):null})}const M="_ScoreTable_2uaez_1",z="_Player_2uaez_9",v={ScoreTable:M,Player:z};function A(){return e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-person-bounding-box",viewBox:"0 0 16 16",children:[e.jsx("path",{d:"M1.5 1a.5.5 0 0 0-.5.5v3a.5.5 0 0 1-1 0v-3A1.5 1.5 0 0 1 1.5 0h3a.5.5 0 0 1 0 1zM11 .5a.5.5 0 0 1 .5-.5h3A1.5 1.5 0 0 1 16 1.5v3a.5.5 0 0 1-1 0v-3a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 1-.5-.5M.5 11a.5.5 0 0 1 .5.5v3a.5.5 0 0 0 .5.5h3a.5.5 0 0 1 0 1h-3A1.5 1.5 0 0 1 0 14.5v-3a.5.5 0 0 1 .5-.5m15 0a.5.5 0 0 1 .5.5v3a1.5 1.5 0 0 1-1.5 1.5h-3a.5.5 0 0 1 0-1h3a.5.5 0 0 0 .5-.5v-3a.5.5 0 0 1 .5-.5"}),e.jsx("path",{d:"M3 14s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1zm8-9a3 3 0 1 1-6 0 3 3 0 0 1 6 0"})]})}function D(){return e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",height:"16",width:"16",viewBox:"0 0 512 512",children:e.jsx("path",{d:"M417.3 360.1l-71.6-4.8c-5.2-.3-10.3 1.1-14.5 4.2s-7.2 7.4-8.4 12.5l-17.6 69.6C289.5 445.8 273 448 256 448s-33.5-2.2-49.2-6.4L189.2 372c-1.3-5-4.3-9.4-8.4-12.5s-9.3-4.5-14.5-4.2l-71.6 4.8c-17.6-27.2-28.5-59.2-30.4-93.6L125 228.3c4.4-2.8 7.6-7 9.2-11.9s1.4-10.2-.5-15l-26.7-66.6C128 109.2 155.3 89 186.7 76.9l55.2 46c4 3.3 9 5.1 14.1 5.1s10.2-1.8 14.1-5.1l55.2-46c31.3 12.1 58.7 32.3 79.6 57.9l-26.7 66.6c-1.9 4.8-2.1 10.1-.5 15s4.9 9.1 9.2 11.9l60.7 38.2c-1.9 34.4-12.8 66.4-30.4 93.6zM256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zm14.1-325.7c-8.4-6.1-19.8-6.1-28.2 0L194 221c-8.4 6.1-11.9 16.9-8.7 26.8l18.3 56.3c3.2 9.9 12.4 16.6 22.8 16.6h59.2c10.4 0 19.6-6.7 22.8-16.6l18.3-56.3c3.2-9.9-.3-20.7-8.7-26.8l-47.9-34.8z"})})}function E(){return e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",children:e.jsx("path",{d:"M438.6 150.6c12.5-12.5 12.5-32.8 0-45.3l-96-96c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L338.7 96 32 96C14.3 96 0 110.3 0 128s14.3 32 32 32l306.7 0-41.4 41.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l96-96zm-333.3 352c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.3 416 416 416c17.7 0 32-14.3 32-32s-14.3-32-32-32l-306.7 0 41.4-41.4c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-96 96c-12.5 12.5-12.5 32.8 0 45.3l96 96z"})})}function P({player:s}){const n=r.useContext(b),{patch:t}=g(),a=`player-${s.id}-change-team`,d=(l,m)=>{l.preventDefault(),t(route("playerGame.changeTeam",[n.id,{player_id:m}]),{onSuccess:()=>{document.getElementById(a).scrollIntoView({block:"center",behavior:"instant"})}})};return e.jsx("form",{onSubmit:l=>d(l,s.id),className:"mb-0 me-1",id:a,children:e.jsx("button",{className:"bg-secondary border-0 d-flex justify-content-center align-items-center mt-0 mb-0 p-1",type:"submit",children:e.jsx(E,{})})})}const $="_Lds_1bs6b_1",I={Lds:$,"lds-hourglass":"_lds-hourglass_1bs6b_1"};function B(s=20){return e.jsxs("div",{className:I.Lds,style:{width:s},children:[e.jsx("div",{}),e.jsx("div",{})]})}function F({player:s}){const{gameContext:n,setGameContext:t}=r.useContext(b),{loading:a,setLoading:d}=r.useContext(w),[l,m]=r.useState(s.goals),x=(c,i,j)=>{c.preventDefault(),a!==!0&&(d(!0),C.post(route(`goal.${j}`,[n.id,{player_id:i}])).then(()=>{j==="create"?(m(l+1),t(u=>{const h={...u};return h.score[s.team_id]++,h})):(m(l-1),t(u=>{const h={...u};return h.score[s.team_id]--,h})),d(!1)}))},o=(c,i,j,u)=>e.jsx("form",{id:`player-${s.id}-add-goal`,onSubmit:h=>c(h,s.id,u),className:"mb-0 text-center",children:e.jsx("button",{disabled:a,className:`${j} border-0 d-flex justify-content-center align-items-center mt-0 mb-0 p-0 mx-auto`,type:"submit",children:a?e.jsx(B,{}):i})});return e.jsxs("div",{className:"row w-100 align-items-center pe-2",children:[e.jsx("span",{className:"col-3 text-center",children:l>0&&o(x,"-","bg-danger","destroy")}),e.jsx("span",{className:"col-6 text-center mx-auto",children:l}),e.jsx("span",{className:"col-3 text-center",children:o(x,"+","bg-success","create")})]})}function N({team:s}){const n=r.useContext(f);return e.jsxs("div",{className:`${v.ScoreTable}`,children:[e.jsxs("div",{className:"row border-bottom pb-2",children:[e.jsxs("h5",{className:"col-7 m-0",children:[e.jsx(A,{height:10,width:10})," "]}),e.jsx("h5",{className:"col-5 m-0 text-center",children:e.jsx(D,{height:10,width:10})})]}),e.jsx("div",{className:"row",children:s.map((t,a)=>e.jsxs("div",{className:`${v.Player} row border-bottom`,children:[e.jsxs("div",{className:"d-flex justify-content-start align-items-center col-7",children:[e.jsx(P,{player:t}),t.first_name," ",t.last_name]}),e.jsx("div",{className:"d-flex justify-content-end justify-content-sm-center align-items-center col-5",children:n.user?e.jsx(F,{player:t}):e.jsx(e.Fragment,{children:t.goals})})]},a))})]})}const b=r.createContext({gameContext:null,setGameContext:()=>{}}),w=r.createContext({loading:!1,setLoading:()=>{}});function O({game:s}){const[n,t]=r.useState(s),a={gameContext:n,setGameContext:t},[d,l]=r.useState(!1),m={loading:d,setLoading:l},x=s.players.filter(i=>i.team_id===1),o=s.players.filter(i=>i.team_id===2),c=s.players.filter(i=>i.team_id===null);return e.jsx(b.Provider,{value:a,children:e.jsx(w.Provider,{value:m,children:e.jsxs("article",{className:`${p.Game} row`,children:[e.jsxs("div",{className:"col-12 mb-5 text-center",children:[e.jsx("a",{href:route("game.show",[s.id]),children:e.jsxs("h2",{children:[n.score[1]," ","-"," ",n.score[2]]})}),e.jsx("h3",{children:s.place}),e.jsx("small",{children:s.date_time})]}),e.jsxs("div",{className:"col-12",children:[e.jsxs("div",{className:`${p.Table} row`,children:[c.length>=1&&e.jsx("div",{className:"mb-3",children:e.jsx(T,{players:c})}),e.jsx("div",{className:"col-12 col-lg-5",children:e.jsx(N,{team:x})}),e.jsx("div",{className:"mb-5 mb-lg-0 col-lg-1 mx-4"}),e.jsx("div",{className:"col-12 col-lg-5",children:e.jsx(N,{team:o})})]}),e.jsx(S,{game:s})]})]})})})}export{D as B,O as G,T as N,A as P,p as a,v as s};
